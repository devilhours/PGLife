{"ast":null,"code":"var _jsxFileName = \"C:\\\\Codes 1\\\\pglife\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport FilterBar from './FilterBar';\nimport FilterModal from './FilterModal';\nimport PropertyCard from './PropertyCard';\nimport NoProperty from './NoProperty';\nimport { base_path } from './utils.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      properties: [],\n      sort: \"none\",\n      filter: {\n        gender: \"none\"\n      }\n    };\n    this.toggleInterested = property_id => {\n      fetch(`${base_path}/api/toggle_interested.php?property_id=${property_id}`).then(response => response.json()).then(responseData => {\n        if (responseData.success) {\n          console.log('Success');\n          this.updateInterested(property_id);\n        } else if (!responseData.success && !responseData.is_logged_in) {\n          console.log('Not logged in!');\n          window.$(\"#login-modal\").modal(\"show\");\n        }\n      }).catch(error => {\n        console.log('Error fetching and parsing data', error);\n      });\n    };\n    this.updateInterested = property_id => {\n      let updated_properties = [...this.state.properties];\n      updated_properties.forEach(property => {\n        if (property.id === property_id) {\n          property.is_interested = !property.is_interested;\n          if (property.is_interested) {\n            property.interested_users_count++;\n          } else {\n            property.interested_users_count--;\n          }\n        }\n      });\n      this.setState({\n        properties: updated_properties\n      });\n    };\n    this.updateSort = sort => {\n      this.setState({\n        sort: sort\n      });\n    };\n    this.updateFilter = gender => {\n      this.setState({\n        filter: {\n          gender: gender\n        }\n      });\n    };\n  }\n  componentDidMount() {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const city_name = params.get('city');\n    fetch(`${base_path}/api/get_properties_by_city.php?city=${city_name}`).then(response => response.json()).then(responseData => {\n      this.setState({\n        properties: responseData\n      });\n    }).catch(error => {\n      console.log('Error fetching and parsing data', error);\n    });\n  }\n  render() {\n    let properties = [...this.state.properties];\n\n    // Sorting\n    if (this.state.sort !== \"none\") {\n      if (this.state.sort === \"desc\") {\n        properties.sort((a, b) => b.rent - a.rent);\n      } else {\n        properties.sort((a, b) => a.rent - b.rent);\n      }\n    }\n\n    // Filter\n    if (this.state.filter.gender !== \"none\") {\n      properties = properties.filter(property => property.gender === this.state.filter.gender);\n    }\n    let property_cards;\n    if (properties.length > 0) {\n      property_cards = properties.map(property => /*#__PURE__*/_jsxDEV(PropertyCard, {\n        property: property,\n        toggleInterested: () => this.toggleInterested(property.id)\n      }, property.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this));\n    } else {\n      property_cards = /*#__PURE__*/_jsxDEV(NoProperty, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 24\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-container\",\n        children: [/*#__PURE__*/_jsxDEV(FilterBar, {\n          currentSort: this.state.sort,\n          updateSort: this.updateSort,\n          currentFilter: this.state.filter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), property_cards]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FilterModal, {\n        currentFilter: this.state.filter,\n        updateFilter: this.updateFilter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","FilterBar","FilterModal","PropertyCard","NoProperty","base_path","jsxDEV","_jsxDEV","Fragment","_Fragment","App","constructor","args","state","properties","sort","filter","gender","toggleInterested","property_id","fetch","then","response","json","responseData","success","console","log","updateInterested","is_logged_in","window","$","modal","catch","error","updated_properties","forEach","property","id","is_interested","interested_users_count","setState","updateSort","updateFilter","componentDidMount","search","location","params","URLSearchParams","city_name","get","render","a","b","rent","property_cards","length","map","fileName","_jsxFileName","lineNumber","columnNumber","children","className","currentSort","currentFilter"],"sources":["C:/Codes 1/pglife/src/App.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport FilterBar from './FilterBar';\r\nimport FilterModal from './FilterModal';\r\nimport PropertyCard from './PropertyCard';\r\nimport NoProperty from './NoProperty';\r\nimport { base_path } from './utils.js';\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    properties: [],\r\n    sort: \"none\",\r\n    filter: {\r\n      gender: \"none\"\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const search = window.location.search;\r\n    const params = new URLSearchParams(search);\r\n    const city_name = params.get('city');\r\n\r\n    fetch(`${base_path}/api/get_properties_by_city.php?city=${city_name}`)\r\n      .then(response => response.json())\r\n      .then(responseData => {\r\n        this.setState({\r\n          properties: responseData\r\n        });\r\n      })\r\n      .catch(error => {\r\n        console.log('Error fetching and parsing data', error);\r\n      });\r\n  }\r\n\r\n  toggleInterested = property_id => {\r\n    fetch(`${base_path}/api/toggle_interested.php?property_id=${property_id}`)\r\n      .then(response => response.json())\r\n      .then(responseData => {\r\n        if (responseData.success) {\r\n          console.log('Success');\r\n          this.updateInterested(property_id);\r\n        } else if (!responseData.success && !responseData.is_logged_in) {\r\n          console.log('Not logged in!');\r\n          window.$(\"#login-modal\").modal(\"show\");\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log('Error fetching and parsing data', error);\r\n      });\r\n  }\r\n\r\n  updateInterested = property_id => {\r\n    let updated_properties = [...this.state.properties];\r\n    updated_properties.forEach((property) => {\r\n      if (property.id === property_id) {\r\n        property.is_interested = !property.is_interested;\r\n        if (property.is_interested) {\r\n          property.interested_users_count++;\r\n        } else {\r\n          property.interested_users_count--;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.setState({\r\n      properties: updated_properties\r\n    });\r\n  }\r\n\r\n  updateSort = sort => {\r\n    this.setState({\r\n      sort: sort\r\n    });\r\n  }\r\n\r\n  updateFilter = gender => {\r\n    this.setState({\r\n      filter: {\r\n        gender: gender\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let properties = [...this.state.properties];\r\n\r\n    // Sorting\r\n    if (this.state.sort !== \"none\") {\r\n      if (this.state.sort === \"desc\") {\r\n        properties.sort((a, b) => b.rent - a.rent);\r\n      } else {\r\n        properties.sort((a, b) => a.rent - b.rent);\r\n      }\r\n    }\r\n\r\n    // Filter\r\n    if (this.state.filter.gender !== \"none\") {\r\n      properties = properties.filter(property =>\r\n        property.gender === this.state.filter.gender\r\n      );\r\n    }\r\n\r\n    let property_cards;\r\n    if (properties.length > 0) {\r\n      property_cards = properties.map(property =>\r\n        <PropertyCard\r\n          key={property.id}\r\n          property={property}\r\n          toggleInterested={() => this.toggleInterested(property.id)}\r\n        />\r\n      );\r\n    } else {\r\n      property_cards = <NoProperty />;\r\n    }\r\n\r\n\r\n    return (\r\n      <>\r\n        <div className=\"page-container\">\r\n          <FilterBar\r\n            currentSort={this.state.sort}\r\n            updateSort={this.updateSort}\r\n            currentFilter={this.state.filter}\r\n          />\r\n\r\n          {property_cards}\r\n        </div>\r\n\r\n        <FilterModal\r\n          currentFilter={this.state.filter}\r\n          updateFilter={this.updateFilter}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}